!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["antd-auto-form"]=t():e["antd-auto-form"]=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=42)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("antd/lib/form")},function(e,t){e.exports=require("antd/lib/col")},function(e,t){e.exports=require("@ant-design/icons")},function(e,t){e.exports=require("antd/lib/select")},function(e,t){e.exports=require("antd/lib/input-number")},function(e,t){e.exports=require("braft-editor")},function(e,t){e.exports=require("antd/lib/input")},function(e,t){e.exports=require("antd/lib/tree-select")},function(e,t){e.exports=require("antd/lib/tooltip")},function(e,t){e.exports=require("react-custom-scrollbars")},function(e,t,n){var r=n(38),a=n(39);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},function(e,t){e.exports=require("antd/lib/input-number/style/css")},function(e,t){e.exports=require("antd/lib/select/style/css")},function(e,t){e.exports=require("antd/lib/row")},function(e,t){e.exports=require("antd/lib/upload")},function(e,t){e.exports=require("antd/lib/message")},function(e,t){e.exports=require("antd/lib/date-picker")},function(e,t){e.exports=require("antd/lib/radio")},function(e,t){e.exports=require("antd/lib/auto-complete")},function(e,t){e.exports=require("antd/lib/drawer")},function(e,t){e.exports=require("antd/lib/button")},function(e,t){e.exports=require("@ant-design/pro-table")},function(e,t){e.exports=require("umi-request")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("antd/lib/row/style/css")},function(e,t){e.exports=require("antd/lib/upload/style/css")},function(e,t){e.exports=require("antd/lib/message/style/css")},function(e,t){e.exports=require("antd/lib/date-picker/style/css")},function(e,t){e.exports=require("antd/lib/radio/style/css")},function(e,t){e.exports=require("antd/lib/auto-complete/style/css")},function(e,t){e.exports=require("antd/lib/col/style/css")},function(e,t){e.exports=require("antd/lib/input/style/css")},function(e,t){e.exports=require("antd/lib/drawer/style/css")},function(e,t){e.exports=require("antd/lib/button/style/css")},function(e,t){e.exports=require("antd/lib/form/style/css")},function(e,t){e.exports=require("antd/lib/tree-select/style/css")},function(e,t){e.exports=require("antd/lib/tooltip/style/css")},function(e,t,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function l(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],a=0;a<e.length;a++){var i=e[a],u=t.base?i[0]+t.base:i[0],c=n[u]||0,s="".concat(u," ").concat(c);n[u]=c+1;var f=l(s),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(o[f].references++,o[f].updater(d)):o.push({identifier:s,updater:b(d,t),references:1}),r.push(s)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var s,f=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,y=0;function b(e,t){var n,r,a;if(t.singleton){var i=y++;n=m||(m=c(t)),r=d.bind(null,n,i,!1),a=d.bind(null,n,i,!0)}else n=c(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=l(n[r]);o[a].references--}for(var i=u(e,t),c=0;c<n.length;c++){var s=l(n[c]);0===o[s].references&&(o[s].updater(),o.splice(s,1))}n=i}}}},function(e,t,n){(t=n(40)(!1)).push([e.i,'.items {\n  cursor: pointer;\n  padding: 8px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: "100%";\n}\n.items > i {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-style: normal;\n}\n.items > span {\n  width: 25px;\n}\n.items:hover {\n  background-color: #f9f9f9;\n}\n',""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(o=r,l=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(u," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([a]).join("\n")}var o,l,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t){e.exports=require("braft-editor/dist/index.css")},function(e,t,n){"use strict";n.r(t),n.d(t,"InitForm",(function(){return ge})),n.d(t,"AutoTable",(function(){return Q})),n.d(t,"Editor",(function(){return ce}));n(25);var r=n(14),a=n.n(r),i=(n(26),n(15)),o=n.n(i),l=(n(27),n(16)),u=n.n(l),c=(n(12),n(5)),s=n.n(c),f=(n(28),n(17)),d=n.n(f),p=(n(29),n(18)),m=n.n(p),y=(n(30),n(19)),b=n.n(y),v=(n(31),n(2)),h=n.n(v),g=(n(32),n(7)),x=n.n(g),w=(n(33),n(20)),O=n.n(w),E=(n(34),n(21)),S=n.n(E),j=(n(35),n(1)),q=n.n(j),k=(n(13),n(4)),A=n.n(k),C=(n(36),n(8)),I=n.n(C),L=n(0),T=n.n(L),R=n(3),P=(n(37),n(9)),N=n.n(P),D=n(22),z=n.n(D),M=n(23),F=n.n(M);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=e.x,n=e.y,r=e.dataSource,a=e.defaultPageSize,i=(e.dispatch,e.pagination),o=e.columns,l=e.rowKey,u=(e.savekey,e.actionRef),c=e.formRef,s=e.path,f=e.extraparams,d=void 0===f?{}:f,p=e.rowSelection,m=e.tableRender,y=e.getDefaultSelected,b=e.rowClassNameFn,v=e.showQuickJumper,h=localStorage.getItem("size"),g=B(Object(L.useState)(100),2),x=g[0],w=g[1],O=B(Object(L.useState)(h||"small"),2),E=O[0],S=O[1],j=Object(L.useRef)(),q=Object(L.useRef)();Object(L.useMemo)((function(){j.current&&j.current.reload()}),[d]);var k={};n&&(k=J(J({},k),{},{y:n})),t&&(k=J(J({},k),{},{x:t}));var A,C,I=r&&Array.isArray(r)?{dataSource:r,pagination:{showTotal:function(e,t){return T.a.createElement("span",null,"共",e,"条")},showQuickJumper:!1,pageSize:a||15,pageSizeOptions:[10,15,30,50,100,200],total:r.length},search:{filterType:"light"},toolBarRender:!1}:{request:(A=regeneratorRuntime.mark((function e(){var t,n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},s){e.next=3;break}return e.abrupt("return");case 3:return n=localStorage.getItem("TOKEN")?localStorage.getItem("TOKEN"):"b60ef0c40b7f1b7e63c2b24b127988d4",r={"Content-Type":"application/json",token:n||""},delete(a=J(J(J({},t),d),{},{pageIndex:t.current})).current,"false"==i&&(delete a.pageIndex,delete a.pageSize),e.abrupt("return",F()(s,{body:JSON.stringify(a||{}),headers:r,method:"POST"}));case 9:case"end":return e.stop()}}),e)})),C=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=A.apply(e,t);function i(e){_(a,n,r,i,o,"next",e)}function o(e){_(a,n,r,i,o,"throw",e)}i(void 0)}))},function(){return C.apply(this,arguments)}),pagination:{showQuickJumper:!v,pageSize:15,pageSizeOptions:[10,15,30,50,100,200],total:x},search:{filterType:"light"}};return T.a.createElement(z.a,U({size:E,onSizeChange:function(e){localStorage.setItem("size",e),S(e)},columns:o.map((function(e){return e.ellipsis||(e.ellipsis=!0),e})),scroll:k,actionRef:u||j,formRef:c||q,rowKey:l||"id",dateFormatter:"string",postData:function(e){return e.page?w(e.page.total):w(e.dataList.length),y&&y(e),"false"==i?e.dataList:e.page?e.page.list:[]},rowSelection:p||!1,tableAlertRender:!1,tableRender:m?function(e,t){return m(e,t)}:function(e,t){return t},rowClassName:b?function(e,t){return b(e,t)}:""},I))},Y=n(10),Z=n(11),V=n.n(Z);function W(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t){for(var n=[],r=0;r<e.length;r++){var a=n.length>0?n.map((function(e){return e[t]})):[];e[r]&&-1==a.indexOf(e[r][t])&&n.push(e[r])}return n}function ne(e){var t=e.value,n=e.onChange,r=e.pagination,a=e.columns,i=e.extraparams,o=e.path,l=e.editable,u=e.rowKey,c=e.rowName,f=G(Object(L.useState)(!0),2),d=f[0],p=f[1],m=G(Object(L.useState)(),2),y=m[0],b=m[1],v=G(Object(L.useState)([]),2),h=v[0],g=v[1];if(l){var x=function(e,n){var r=e.dataIndex,a=t&&t.length>0?t.filter((function(e){return e[u]==n[u]})):[];return 0==a.length?n[r]:a[0][r]};a.map((function(e,r){var a=t?t.map((function(e){return e[u]})):[];if("InputNumber"==e.selectedRender){e.render=function(r,i){return-1==a.indexOf(i[u])?T.a.createElement("span",null,x(e,i)):T.a.createElement(s.a,{value:x(e,i),onChange:function(r){var a=t.map((function(t){return t[u]==i[u]&&(t[e.dataIndex]=r),t}));n(a)}})}}else if("Select"==e.selectedRender){e.render=function(r,i){return-1==a.indexOf(i[u])?T.a.createElement("span",null,x(e,i)):T.a.createElement(A.a,{value:x(e,i),onChange:function(r){var a=t.map((function(t){return t[u]==i[u]&&(t[e.dataIndex]=r),t}));n(a)}})}}else e.selectedRender;return e}))}return Object(L.useMemo)((function(){}),[t]),l?T.a.createElement("div",{style:{border:"#ddd solid 1px"},className:"fatable"},T.a.createElement(Q,{showQuickJumper:"false",rowKey:u,columns:a,pagination:r,extraparams:i,getDefaultSelected:function(e){e.selectedList&&e.selectedList.length>0&&d&&(n(e.selectedList),p(!1))},path:o,rowSelection:{selectedRowKeys:t?t.map((function(e){return e[u]})):[],preserveSelectedRowKeys:!0,onChange:function(e,t){var r,a=te([].concat(W(h),W(t)),u);r=e.map((function(e){return a.filter((function(t){return t[u]==e}))[0]})),n(r)}},tableRender:function(e,r){return T.a.createElement("div",{style:{display:"flex",width:"100%",overflow:"hidden"}},T.a.createElement("div",{style:{flex:1}},r),(null==t?void 0:t.length)>0&&T.a.createElement("div",{style:{width:120,overflow:"hidden",display:"flex",flexDirection:"column"}},T.a.createElement("div",{style:{padding:"11px 6px",display:"flex",justifyContent:"space-between",alignItems:"center"}},T.a.createElement("span",{style:{fontSize:16}},"选中："),T.a.createElement("span",{style:{fontSize:16}},null==t?void 0:t.length,"个")),T.a.createElement("div",{style:{flex:1,paddingBottom:18}},T.a.createElement(Y.Scrollbars,{thumbMinSize:10,autoHide:!0,style:{width:"100%",height:"100%"},hideTracksWhenNotNeeded:!0},t.map((function(e){return T.a.createElement("div",{className:V.a.items,onClick:function(){b(e[u])}},T.a.createElement(N.a,{title:e[c]?e[c]:""},T.a.createElement("i",null,e[c]?e[c]:"")),T.a.createElement(R.CloseOutlined,{onClick:function(r){r.stopPropagation(),e[u]==y&&b(null);var a=t.filter((function(t){return t[u]!=e[u]}));n(a)}}))}))))))},rowClassNameFn:function(e,t){return y===e[u]?"selectedRow":null}})):T.a.createElement("div",{style:{border:"#ddd solid 1px"},className:"fatable"},T.a.createElement(Q,{showQuickJumper:"false",rowKey:u,columns:a,pagination:r,extraparams:i,getDefaultSelected:function(e){e.selectedList&&e.selectedList.length>0&&d&&(n(e.selectedList.map((function(e){return e[u]}))),g([].concat(W(h),W(e.selectedList))),p(!1))},path:o,rowSelection:{selectedRowKeys:t||[],preserveSelectedRowKeys:!0,onChange:function(e,t){n(e);var r,a=te([].concat(W(h),W(t)),u);r=e.map((function(e){return a.filter((function(t){return t[u]==e}))[0]})),g(r)}},tableRender:function(e,r){return T.a.createElement("div",{style:{display:"flex",width:"100%",overflow:"hidden"}},T.a.createElement("div",{style:{flex:1}},r),(null==t?void 0:t.length)>0&&T.a.createElement("div",{style:{width:120,overflow:"hidden",display:"flex",flexDirection:"column"}},T.a.createElement("div",{style:{padding:"11px 6px",display:"flex",justifyContent:"space-between",alignItems:"center"}},T.a.createElement("span",{style:{fontSize:16}},"选中："),T.a.createElement("span",{style:{fontSize:16}},null==t?void 0:t.length,"个")),T.a.createElement("div",{style:{flex:1,paddingBottom:18}},T.a.createElement(Y.Scrollbars,{thumbMinSize:10,autoHide:!0,style:{width:"100%",height:"100%"},hideTracksWhenNotNeeded:!0},h.map((function(e){return T.a.createElement("div",{className:V.a.items,onClick:function(){b(e[u])}},T.a.createElement(N.a,{title:e[c]?e[c]:""},T.a.createElement("i",null,e[c]?e[c]:"")),T.a.createElement(R.CloseOutlined,{onClick:function(r){r.stopPropagation(),e[u]==y&&b(null);var a=t.filter((function(t){return t!=e[u]}));n(a);var i=h.filter((function(t){return t[u]!=e[u]}));g(i)}}))}))))))},rowClassNameFn:function(e,t){return y===e[u]?"selectedRow":null}}))}n(41);var re=n(6),ae=n.n(re),ie=n(24),oe=n.n(ie);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e){var t=e.value,n=e.onChange,r=e.height,a=e.rerender,i=e.serverURL,o=le(Object(L.useState)(ae.a.createEditorState('<p style="text-align:start;" size="0" _root="undefined" __ownerID="undefined" __hash="undefined" __altered="false"></p>')),2),l=o[0],u=o[1],c=le(Object(L.useState)(!0),2),s=c[0],f=c[1];return Object(L.useEffect)((function(){a&&f(a)}),[a]),Object(L.useEffect)((function(){t&&s&&(u(ae.a.createEditorState(t)),f(!1))}),[t]),T.a.createElement("div",{style:{border:"#ddd solid 1px",height:r||400,overflow:"hidden"}},T.a.createElement(ae.a,{media:{uploadFn:function(e){var t=new XMLHttpRequest,n=new FormData,r=function(t){e.error({msg:"上传失败"})};t.upload.addEventListener("progress",(function(t){e.progress(t.loaded/t.total*100)}),!1),t.addEventListener("load",(function(n){e.success({url:t.responseText?JSON.parse(t.responseText).data.dataList[0].url:null,meta:{id:oe()(),title:e.file.name,alt:e.file.name,loop:!0,autoPlay:!0,controls:!0,poster:"http://xxx/xx.png"}})}),!1),t.addEventListener("error",r,!1),t.addEventListener("abort",r,!1),n.append("file",e.file),t.open("POST",i,!0),t.send(n)}},value:l,onChange:function(e){u(e),n(e.toHTML())}}))}function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fe(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=I.a.TreeNode,he=A.a.Option,ge=function(e){var t=e.fields,n=e.onChange,r=e.submitting,i=e.submitData,l=e.actions,c=e.col,f=ye(Object(L.useState)([]),2),p=f[0],y=f[1],v=ye(Object(L.useState)(""),2),g=v[0],w=v[1],E=ye(Object(L.useState)(!1),2),j=E[0],k=E[1],C=ye(Object(L.useState)(!0),2),P=C[0],N=C[1],D=ye(q.a.useForm(),1)[0],z=ye(Object(L.useState)({}),2),M=z[0],F=z[1],U=ye(Object(L.useState)({}),2),_=U[0],K=U[1],J=ye(Object(L.useState)({}),2),H=J[0],B=J[1],$=ye(Object(L.useState)(!1),2),Q=$[0],Y=$[1],Z=ye(Object(L.useState)({}),2),V=Z[0],W=Z[1];Object(L.useEffect)((function(){N(!1);var e=[],n={},r={},a={};for(var i in t)if(e.push(t[i]),!0===t[i].linked&&(n[i]=t[i].value),t[i].belinked&&(r[i]=t[i].belinked),"upload"===t[i].type){var o=t[i],l=o.value?o.value.fileList?o.value.fileList:o.value:[];a[i]=l}K(n),B(r),F(a),setTimeout((function(){N(!0)}),1),y(e)}),[t]),Object(L.useEffect)((function(){for(var e in t){var n=X(t[e]).options;ae(n,t[e])}}),[_]);var G=function(e){return e||(c||{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12})},X=function(e){var t=e.belinked&&Object.keys(e.belinked),n=(_&&Object.keys(_),e.hides),r=e.options;if(t&&t.length>0){if(e.belinked.hides&&e.belinked.hides.length>0){var a=e.belinked.hides.filter((function(e){return e.required})).map((function(e){return e.equalvalue?e.equalvalue&&Array.isArray(e.equalvalue)&&e.equalvalue.length>0?-1!=e.equalvalue.indexOf(_[e.name]):_[e.name]==e.equalvalue:!e.unequalvalue||(e.unequalvalue&&Array.isArray(e.unequalvalue)&&e.unequalvalue.length>0?-1==e.unequalvalue.indexOf(_[e.name]):_[e.name]!=e.unequalvalue)})),i=e.belinked.hides.filter((function(e){return!e.required})).map((function(e){return e.equalvalue?e.equalvalue&&Array.isArray(e.equalvalue)&&e.equalvalue.length>0?-1!=e.equalvalue.indexOf(_[e.name]):_[e.name]==e.equalvalue:!e.unequalvalue||(e.unequalvalue&&Array.isArray(e.unequalvalue)&&e.unequalvalue.length>0?-1==e.unequalvalue.indexOf(_[e.name]):_[e.name]!=e.unequalvalue)})),o=a.some((function(e){return 1==e})),l=i.some((function(e){return 1==e}));n=o||l}if(!Array.isArray(e.belinked.options)&&e.belinked.options){var u=e.belinked.options,c=u.database,s=u.params,f={};for(var d in s)"linked"==s[d]?f[d]=_[d]:f[d]=s[d];r=Array.isArray(c)?c:{database:c,params:f}}}return{hides:n,options:r}},ee=function e(t){return t&&t.length>0&&t.map((function(t){var n=T.a.createElement("span",null,t.title);return t.children?T.a.createElement(ve,{value:t.key,key:t.key,title:n},e(t.children)):T.a.createElement(ve,{value:t.key,key:t.key,title:n})}))};function te(e){var n=pe({},e);for(var r in t)if("upload"==t[r].type){var a=e[r]?Array.isArray(e[r])?e[r]:e[r].fileList:[];n[r]=a.map((function(e){return e.response?e.response.data.dataList[0]:e.url?e.url:null})),1==t[r].limit&&(n[r]=n[r][0]?n[r][0]:"")}else"datepicker"==t[r].type&&(n[r]=e[r]?e[r].format("YYYY-MM-DD"):null);i(n,(function(){D.resetFields()}))}var re=T.a.createElement(S.a,{style:{width:"100%"},htmlType:"submit",type:"primary",size:"large",disabled:r||j,onClick:function(){D.validateFields().then((function(e){k(!0),te(e),setTimeout((function(){k(!1)}),1e3)})).catch((function(e){}))}},r||j?T.a.createElement(R.LoadingOutlined,null):null,T.a.createElement("span",{style:{marginLeft:12,fontSize:16}}," ",r||j?"提交中...":"提交")),ae=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,a,i,o,l,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.name[0],!Array.isArray(t)){e.next=5;break}JSON.stringify(V[r])!==JSON.stringify(t)&&W((function(e){return pe(pe({},e),{},me({},r,t))})),e.next=18;break;case 5:if(null==t||!t.database){e.next=18;break}if(i=(a=t||{}).database,o=a.params,l=T.a.createElement(T.a.Fragment,null),!Array.isArray(i)){e.next=11;break}l=i,e.next=17;break;case 11:return e.next=13,i(o);case 13:u=e.sent,c=[],"0000"==u.code&&(c=null==u||null===(s=u.data)||void 0===s?void 0:s.dataList),l=c;case 17:JSON.stringify(V[r])!==JSON.stringify(l)&&W((function(e){return pe(pe({},e),{},me({},r,l))}));case 18:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){fe(i,r,a,o,l,"next",e)}function l(e){fe(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return T.a.createElement("div",null,T.a.createElement(O.a,{title:"预览",placement:"top",closable:!0,onClose:function(){Y(!1)},visible:Q,height:"100%"},T.a.createElement("div",{style:{width:"100%",height:"100%",backgroundImage:"url(".concat(g,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})),T.a.createElement(q.a,{form:D,name:"initform",layout:"vertical",fields:p,onFinish:function(e){te(e)},onValuesChange:function(e,r){n(e,r);var a=Object.keys(e)[0];for(var i in _)if(i==a&&(K(pe(pe({},_),{},me({},i,e[i]))),t[i].linked)){var o=[];for(var l in H)H[l].options&&-1!=Object.keys(H[l].options.params).indexOf(i)&&o.push(l);o.map((function(e){return D.setFieldsValue(me({},e,""))}))}}},T.a.createElement(a.a,{gutter:24},p.map((function(e,t){var n=X(e),r=n.options;if("input"==e.type||"password"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请输入".concat(e.title)},-1!=e.name[0].indexOf("phone")?{pattern:/^\d{11}$/,message:"手机号格式不正确"}:-1!=e.name[0].indexOf("mail")?{pattern:/^[a-z0-9A-Z]+[- | a-z0-9A-Z . _]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-z]{2,}$/,message:"邮箱格式不正确"}:{}]},T.a.createElement(x.a,{allowClear:!0,type:e.type,maxLength:100,disabled:e.disabled})));if("editor"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请输入".concat(e.title)}]},T.a.createElement(ce,{value:e.value,height:e.height,rerender:e.rerender,serverURL:e.serverURL?e.serverURL:"/ngy/ngic-auth/common/uploadFile"})));if("autoinput"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请输入".concat(e.title)}]},T.a.createElement(b.a,{allowClear:!0,disabled:e.disabled,options:e.dataSource,filterOption:function(e,t){return t.value&&-1!==t.value.toString().indexOf(e)}})));if("textarea"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请输入".concat(e.title)}]},T.a.createElement(x.a.TextArea,{maxLength:600,rows:4,allowClear:!0,disabled:e.disabled})));if("select"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请选择".concat(e.title)}]},T.a.createElement(A.a,{allowClear:!0,placeholder:"请选择",style:{width:"100%"},showSearch:!0,mode:e.multiple?"multiple":"",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},disabled:e.disabled},V[e.name[0]]&&V[e.name[0]].length>0&&V[e.name[0]].filter((function(e){return!e.hides})).map((function(e,t){return T.a.createElement(he,{disabled:e.disabled,key:t,value:e.dicKey?e.dicKey:e.value},e.dicName?e.dicName:e.label)})))));if("radio"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请选择".concat(e.title)}]},T.a.createElement(m.a.Group,{options:V[e.name[0]]&&V[e.name[0]].length>0&&V[e.name[0]]})));if("datepicker"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请选择".concat(e.title)}]},T.a.createElement(d.a,{disabledDate:e.disabledDate?e.disabledDate:null,disabledTime:e.disabledDateTime?e.disabledDateTime:null,style:{width:"100%"},showTime:e.showTime,format:e.format,disabled:e.disabled})));if("inputnumber"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请输入".concat(e.title)}]},T.a.createElement(s.a,{style:{width:"100%"},disabled:e.disabled,min:e.min?e.min:0,max:e.max})));if("upload"==e.type){var a=P?{name:"file",action:e.serverURL?e.serverURL:"/ngy/ngic-auth/common/uploadFile",listType:"img"==e.listType?"picture-card":"picture",multiple:!!e.multiple&&e.multiple,defaultFileList:e.value&&e.value.fileList?e.value.fileList:[],onChange:function(t){var n=t.file,r=(n.name,n.status),a=(n.response,t.fileList);F(pe(pe({},M),{},me({},e.name[0],a))),"done"==r||"error"==r&&u.a.error("".concat(t.file.name," 上传失败"))},onPreview:function(e){e.url?w(e.url):w(e.thumbUrl),Y(!0)}}:{},i=T.a.createElement("div",null,T.a.createElement(R.PlusOutlined,null),T.a.createElement("div",{style:{marginTop:8}},"上传")),l=e.limit?e.limit:1e3;return!n.hides&&P?T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请选择".concat(e.title)}]},T.a.createElement(o.a,se({},a,{style:{width:"100%"}}),M[e.name[0]]&&M[e.name[0]].length>l-1?null:i))):null}if("treeselect"==e.type)return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请选择".concat(e.title)}]},T.a.createElement(I.a,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},disabled:e.disabled,allowClear:!0,treeDefaultExpandAll:!0,placeholder:"请选择..."},r&&ee(r),V[e.name[0]]&&V[e.name[0]].length>0&&ee(V[e.name[0]]))));if("table"==e.type){var c=function(e){var t={},n=e.extraparams;if(n&&Object.keys(n).length>0)for(var r in n)t="linked"==n[r]?pe(pe({},t),{},me({},r,_[r])):pe(pe({},t),{},me({},r,n[r]));return t}(e);return n.hides?null:T.a.createElement(h.a,se({key:t},G(e.col)),T.a.createElement(q.a.Item,{style:{},label:e.title,name:e.name[0],rules:[{required:e.required,message:"请输入".concat(e.title)}]},T.a.createElement(ne,{columns:e.columns,extraparams:c,path:e.path,editable:e.editable,rowKey:e.rowKey,rowName:e.rowName,pagination:e.pagination})))}})),T.a.createElement(h.a,{span:24,style:{padding:12}},l?l(D,re):re))))}}])}));